<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:pe="http://primefaces.org/ui/extensions"
      xmlns:pm="http://primefaces.org/mobile"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <h:form id="cajasForm" enctype="multipart/form-data">
        <p:growl id="messages" showDetail="true" sticky="true" autoUpdate="true"/>
        <pm:field>
            <p:outputLabel for="imagen" value="Foto:"/>
            <p:fileUpload id="imagen" value="#{cajFacturaEnviadaBean.file}" mode="simple" 
                          skinSimple="true" accept="image/*" 
                          allowTypes="/(\.|\/)(gif|jpe?g|png)$/"
                          required="true">
                <f:passThroughAttribute name="capture" value="camera"/>
            </p:fileUpload>
        </pm:field>
        <pm:field>
            <p:outputLabel for="cliente" value="Cliente:"/>
            <p:selectOneMenu id="cliente" 
                             value="#{cajFacturaEnviadaBean.cajFacturaEnviada.cajFacturaEnviadaPK.codProyecto}"
                             required="true">
                <f:selectItem itemLabel="Seleccione Cliente" itemValue="#{null}" 
                              noSelectionOption="true"/>
                <f:selectItems value="#{cajFacturaEnviadaBean.proyectos}" 
                               var="proyecto" 
                               itemLabel="#{proyecto.descProyecto}" 
                               itemValue="#{proyecto.pryProyectoPK.codProyecto}"/>
                <p:ajax update="cajas:cajasForm:subProyecto" listener="#{cajFacturaEnviadaBean.findSubProyecto()}"/>
            </p:selectOneMenu>
        </pm:field>
        <pm:field id="subProyecto">
            <p:outputLabel for="proyecto" value="Proyecto:"/>
            <p:selectOneMenu id="proyecto" 
                             value="#{cajFacturaEnviadaBean.cajFacturaEnviada.cajFacturaEnviadaPK.codSubproyecto}"
                             required="true">
                <f:selectItem itemLabel="Seleccione Proyecto" itemValue="#{null}" 
                              noSelectionOption="true"/>
                <f:selectItems value="#{cajFacturaEnviadaBean.subProyectos}" 
                               var="subProyecto" 
                               itemLabel="#{subProyecto.descSubproyecto}" 
                               itemValue="#{subProyecto.codSubproyecto}"/>
            </p:selectOneMenu>
        </pm:field>
        <pm:field>
            <p:inputText id="rucCiProveedor" placeholder="RUC Proveedor" 
                         value="#{cajFacturaEnviadaBean.cajFacturaEnviada.cajFacturaEnviadaPK.rucCiProveedor}"
                         requiredMessage="Campo RUC Proveedor requerido"
                         required="true"/>
        </pm:field>
        <pm:field>
            <p:inputText id="numDocumento" placeholder="Factura Nro."
                         value="#{cajFacturaEnviadaBean.cajFacturaEnviada.cajFacturaEnviadaPK.numDocumento}"
                         requiredMessage="Campo Factura Nro requerido"
                         required="true"/>
        </pm:field>
        <pm:field>
            <p:calendar id="fechaDocumento" placeholder="Fecha Doc."
                        value="#{cajFacturaEnviadaBean.cajFacturaEnviada.fechaDocumento}"
                        requiredMessage="Campo Fecha Doc requerido"
                        required="true"/>
        </pm:field>
        <pm:field>
            <p:inputText id="totalConIva" placeholder="Total con IVA"
                         value="#{cajFacturaEnviadaBean.cajFacturaEnviada.totalConIva}"
                         requiredMessage="Campo Total con IVA requerido"
                         required="true"/>
        </pm:field>
        <pm:field>
            <p:inputText id="totalSinIva" placeholder="Total sin IVA"
                         value="#{cajFacturaEnviadaBean.cajFacturaEnviada.totalSinIva}"
                         requiredMessage="Campo Total sin IVA requerido"
                         required="true"/>
        </pm:field>
        <pm:field>
            <p:inputText id="ivaDocumento" placeholder="Iva Documento"
                         value="#{cajFacturaEnviadaBean.cajFacturaEnviada.ivaDocumento}"
                         requiredMessage="Campo Iva Documento requerido"
                         required="true"/>
        </pm:field>
        <pm:field>
            <p:inputText id="codRubro" placeholder="Rubro"
                         value="#{cajFacturaEnviadaBean.cajFacturaEnviada.codRubro}"
                         requiredMessage="Campo Rubro requerido"
                         required="true"/>
        </pm:field>
        <pm:field>
            <p:inputText id="totalDocumento" placeholder="Total Documento"
                         value="#{cajFacturaEnviadaBean.cajFacturaEnviada.totalDocumento}"
                         requiredMessage="Campo Total Documento requerido"
                         required="true"
                         readonly="true"/>
        </pm:field>

        <p:commandButton value="Enviar" ajax="false" 
                         actionListener="#{cajFacturaEnviadaBean.enviar}" 
                         action="pm:cajas"/>
    </h:form>
</html>