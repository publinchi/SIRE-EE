<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:pm="http://primefaces.org/mobile"
      xmlns:p="http://primefaces.org/ui">

    <f:view renderKitId="PRIMEFACES_MOBILE" />
    <f:metadata>
        <f:event type="preRenderView" listener="#{securityMB.checkLogIn()}" />
    </f:metadata>
    <h:head>
        <h:outputStylesheet name="main/css/customStyles.css" />
        <script src="http://maps.google.com/maps/api/js?v=3.22" type="text/javascript" />
        <script>
            function getLocation() {
                if (navigator.geolocation) {
                    navigator.geolocation.getCurrentPosition(showPosition);
                } else {
                    alert('Por favor activar GPS.');
                }
            }

            function showPosition(position) {
                processLocation([{name: 'lat', value: position.coords.latitude}, {name: 'lng', value: position.coords.longitude}]);
            }
        </script>

        <script type="text/javascript">
            var map;
            function renderMap() {
                PF('gmap').render();
            }
            function findMe() {
                navigator.geolocation.getCurrentPosition(
                        function (position) {
                            map = PF('gmap').getMap();
                            latlng = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
                            map.setCenter(latlng);
                            var marker = new google.maps.Marker({
                                position: latlng
                            });
                            marker.setMap(map);
                        },
                        function (error) {
                            alert(error.message);
                        },
                        {
                            enableHighAccuracy: true
                        });
            }
        </script>
    </h:head>

    <h:body>
        <h:outputStylesheet name="main/css/style.css" />
        <pm:page id="inicio">
            <pm:header title="Inicio" />
            <pm:content>
                <ui:include src="menu/_cabecera.xhtml" >
                    <ui:param name="index" value="0" />
                </ui:include>
                <ui:include src="inicio/_inicio.xhtml" />
            </pm:content>
            <pm:footer>
                <p:outputLabel value="SIRE, Copyright © 2015" style="text-align: center"/>
            </pm:footer>
        </pm:page>

        <pm:page id="pedido">
            <pm:header title="Pedido"/>
            <pm:content>
                <ui:include src="menu/_cabecera.xhtml" >
                    <ui:param name="index" value="1" />
                </ui:include>
                <ui:include src="pedido/_createPedido.xhtml" />
            </pm:content>
            <pm:footer>
                <p:outputLabel value="SIRE, Copyright © 2015" style="text-align: center"/>
            </pm:footer>
        </pm:page>

        <pm:page id="cobro">
            <pm:header title="Cobro">
            </pm:header>
            <pm:content>
                <ui:include src="menu/_cabecera.xhtml" >
                    <ui:param name="index" value="2" />
                </ui:include>
                <ui:include src="cobro/_createCobro.xhtml" />
            </pm:content>
            <pm:footer>
                <p:outputLabel value="SIRE, Copyright © 2015" style="text-align: center"/>
            </pm:footer>
        </pm:page>

    </h:body>

</html>